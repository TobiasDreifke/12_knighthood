<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">

    <!-- Shared base classes -->
    <script src="./models/shared/soundhub.class.js"></script>
    <script src="./models/shared/drawable-object.class.js"></script>
    <script src="./models/shared/moveable-object.class.js"></script>
    <script src="./models/shared/keyboard-mapping.class.js"></script>

    <!-- UI components -->
    <script src="./models/ui/status-bar-health.class.js"></script>
    <script src="./models/ui/status-bar-dark.class.js"></script>
    <script src="./models/ui/status-bar-holy.class.js"></script>
    <script src="./models/ui/tooltip-text.class.js"></script>

    <!-- Hero -->
    <script src="./models/hero/animation-frames-assembler.js"></script>
    <script src="./models/hero/animation-controller.js"></script>
    <script src="./models/hero/movement-controller.js"></script>
    <script src="./models/hero/combat-controller.js"></script>
    <script src="./models/hero/hero.class.js"></script>

    <!-- Enemies -->
    <script src="./models/enemies/enemy-animation-controller.js"></script>
    <script src="./models/enemies/goblin-frames.js"></script>
    <script src="./models/enemies/goblin.class.js"></script>
    <script src="./models/enemies/mushroom-frames.js"></script>
    <script src="./models/enemies/mushroom.class.js"></script>
    <script src="./models/enemies/bat-frames.js"></script>
    <script src="./models/enemies/bat-behavior.js"></script>
    <script src="./models/enemies/bat.class.js"></script>
    <script src="./models/enemies/skeleton-boss-frames.js"></script>
    <script src="./models/enemies/skeleton-boss.class.js"></script>

    <!-- Projectiles & items -->
    <script src="./models/world/projectiles/throwableDark.class.js"></script>
    <script src="./models/world/projectiles/throwableHoly.class.js"></script>
    <script src="./models/world/items/pickupSword.class.js"></script>

    <!-- Background systems -->
    <script src="./models/world/backgrounds/bg-object.class.js"></script>
    <script src="./models/world/backgrounds/bg-clouds.class.js"></script>
    <script src="./models/world/backgrounds/cloud-factory.js"></script>
    <script src="./models/world/backgrounds/background-factory.js"></script>

    <!-- Levels -->
    <script src="./models/world/level.js"></script>
    <script src="./levels/level-factory.js"></script>
    <script src="./levels/index.js"></script>

    <script src="./models/world/entity-utils.js"></script>
    <script src="./models/world/level-assembler.js"></script>
    <script src="./models/world/world-initializer.js"></script>
    <script src="./models/world/collision-system.js"></script>
    <script src="./models/world/throw-controller.js"></script>
    <script src="./models/world/render-loop.js"></script>
    <script src="./models/world/enemy-activation.js"></script>
    <script src="./models/world/interval-manager.js"></script>
    <script src="./models/world/game-stats.js"></script>
    <script src="./ui/game-state-ui.js"></script>
    <script src="./models/world/world.class.js"></script>

    <script src="./js/script.js"></script>

    <link rel="shortcut icon" href="./01_assets/2_character_hero/1_idle/idle/adventurer-idle-00.png"
        type="image/x-icon">
    <title>KNIGHTHOOD</title>
</head>

<body onload="init()">
    <header></header>
    <main>

        <div class="game_screen_wrapper">
            <!-- <h1>KNIGHTHOOD</h1> -->
            <!-- Canvas for the game -->
            <div class="canvas_stage">
                <canvas id="canvas" width="720" height="480"></canvas>
                <div class="canvas_ui" role="region" aria-label="Game controls">
                    <button id="ingame-pause-button" class="ui_button icon_button icon_button--pause" type="button"
                        aria-pressed="false">
                        Pause
                    </button>
                    <button id="ingame-mute-button" class="ui_button sound_mute icon_button" type="button"
                        aria-pressed="false">
                        Mute
                    </button>
                    <button id="ingame-fullscreen-button" class="ui_button fullscreen_toggle icon_button" type="button"
                        aria-pressed="false">
                        Fullscreen
                    </button>
                </div>
                <div id="touch-controls" class="touch_controls">
                    <div class="touch_controls__group touch_controls__movement">
                        <button class="touch_button" data-control="left" aria-label="Move Left">&#8592;</button>
                        <button class="touch_button" data-control="down" aria-label="Crouch">&#8595;</button>
                        <button class="touch_button" data-control="right" aria-label="Move Right">&#8594;</button>
                    </div>
                    <div class="touch_controls__group touch_controls__actions">
                        <button class="touch_button primary" data-control="jump" aria-label="Jump">&#8593;</button>
                        <button class="touch_button primary touch_button--icon touch_button--attack"
                            data-control="attack" aria-label="Attack">Attack</button>
                        <button class="touch_button primary touch_button--icon touch_button--holy"
                            data-control="throwholy" aria-label="Throw Holy">Holy</button>
                        <button class="touch_button primary touch_button--icon touch_button--dark"
                            data-control="throwdark" aria-label="Throw Dark">Dark</button>
                    </div>
                </div>


                <div id="orientation-overlay" class="overlay orientation_overlay">
                    <div class="orientation_content">
                        <h2>Rotate Your Device</h2>
                        <p>For the best experience, turn your phone sideways.</p>
                    </div>
                </div>
            </div>

            <!-- Pause screen overlay -->
            <div id="pause-screen" class="overlay">
                <div class="pause_content">

                    <h2>PAUSED</h2>
                    <div class="pause_actions">
                        <button id="pause-continue-button" class="toggle_button">Continue</button>
                        <button id="pause-retry-button" class="toggle_button">Retry</button>
                    </div>
                    <div class="toggle_button_wrapper">
                        <div class="sound_container">
                            <button id="pause-mute-button" class="toggle_button sound_mute icon_button">Mute</button>
                            <!-- <label class="slider_label" for="pause-volume">Volume</label> -->
                            <input id="pause-volume" class="volume_slider sound_volume" type="range" min="0" max="1"
                                step="0.01" value="0.2">
                        </div>
                        <button class="toggle_button fullscreen_toggle icon_button"
                            id="pause-fullscreen-button">Fullscreen</button>
                    </div>
                </div>
            </div>

            <!-- Start screen overlay -->
            <div id="start-screen">
                <div class="pause_content">
                    <h2>KNIGHTHOOD</h2>

                    <div class="pause_actions">
                        <button id="start-button" class="toggle_button">Start Game</button>
                        <button id="start-legal-button" class="toggle_button">Legal Notice</button>
                    </div>
                    <div class="gif_wrapper">
                        <img class="start_gif_hero" src="./01_assets/9_intro_outro_screens/RUN_LOOP.gif">
                        <img class="start_gif_goblin" src="./01_assets/9_intro_outro_screens/GOBLIN_LOOP.gif">
                        <img class="start_gif_goblin" src="./01_assets/9_intro_outro_screens/GOBLIN_LOOP.gif">
                    </div>
                    <div class="toggle_button_wrapper">
                        <button id="start-mute-button" class="toggle_button sound_mute icon_button">Mute</button>
                        <div class="sound_container">
                            <!-- <label class="slider_label" for="start-volume">Volume</label> -->
                            <input id="start-volume" class="volume_slider sound_volume" type="range" min="0" max="1"
                                step="0.01" value="0.2">
                        </div>
                        <button class="toggle_button fullscreen_toggle icon_button"
                            id="start-fullscreen-button">Fullscreen</button>
                    </div>
                </div>
                <footer class="start_footer">
                    <p class="tip">Tip: Holy pierces to the second target; Dark detonates on impact.</p>
                </footer>
            </div>

            <div id="end-screen">
                <h2>You Win!</h2>
                <section class="win_stats__time">
                    <p class="win_stats__value" data-stat="time-ms">0:00</p>
                </section>
                <div id="win-stats" class="win_stats" aria-live="polite">
                    <div class="win_stats__grid">
                        <section class="win_stats__group">
                            <h3>Killed</h3>
                            <ul class="win_stats__list">
                                <li><span>Bats</span><span data-stat="kills-bats">0</span></li>
                                <li><span>Goblins</span><span data-stat="kills-goblins">0</span></li>
                                <li><span>Mushrooms</span><span data-stat="kills-mushrooms">0</span></li>
                                <li><span>Bosses</span><span data-stat="kills-bosses">0</span></li>
                            </ul>
                        </section>
                        <section class="win_stats__group">
                            <h3>Collected</h3>
                            <ul class="win_stats__list">
                                <li><span>Holy Casts</span><span data-stat="collect-holy">0</span></li>
                                <li><span>Dark Casts</span><span data-stat="collect-dark">0</span></li>
                            </ul>
                        </section>
                        <section class="win_stats__group">
                            <h3>Combat</h3>
                            <ul class="win_stats__list">
                                <li><span>Attacks Used</span><span data-stat="attacks-used">0</span></li>
                                <li><span>Holy Casts</span><span data-stat="casts-holy">0</span></li>
                                <li><span>Dark Casts</span><span data-stat="casts-dark">0</span></li>
                                <li><span>Damage Dealt</span><span data-stat="damage-dealt">0</span></li>
                                <li><span>Damage Taken</span><span data-stat="damage-taken">0</span></li>
                            </ul>
                        </section>
                        <section class="win_stats__group">
                            <h3>Mobility</h3>
                            <ul class="win_stats__list">
                                <li><span>Slides Used</span><span data-stat="slides-used">0</span></li>
                                <li><span>Jumps</span><span data-stat="jumps">0</span></li>
                            </ul>
                        </section>
                    </div>
                </div>
                <button id="restart-button">Play Again</button>
            </div>

            <div id="gameover-screen" style="display: none; opacity: 0;">
                <h2>You Lose!</h2>
                <section class="win_stats__time">
                    <p class="win_stats__value" data-stat="time-ms">0:00</p>
                </section>
                <div id="lose-stats" class="win_stats" aria-live="polite">
                    <div class="win_stats__grid">
                        <section class="win_stats__group">
                            <h3>Killed</h3>
                            <ul class="win_stats__list">
                                <li><span>Bats</span><span data-stat="kills-bats">0</span></li>
                                <li><span>Goblins</span><span data-stat="kills-goblins">0</span></li>
                                <li><span>Mushrooms</span><span data-stat="kills-mushrooms">0</span></li>
                                <li><span>Bosses</span><span data-stat="kills-bosses">0</span></li>
                            </ul>
                        </section>
                        <section class="win_stats__group">
                            <h3>Collected</h3>
                            <ul class="win_stats__list">
                                <li><span>Holy Casts</span><span data-stat="collect-holy">0</span></li>
                                <li><span>Dark Casts</span><span data-stat="collect-dark">0</span></li>
                            </ul>
                        </section>
                        <section class="win_stats__group">
                            <h3>Combat</h3>
                            <ul class="win_stats__list">
                                <li><span>Attacks Used</span><span data-stat="attacks-used">0</span></li>
                                <li><span>Holy Casts</span><span data-stat="casts-holy">0</span></li>
                                <li><span>Dark Casts</span><span data-stat="casts-dark">0</span></li>
                                <li><span>Damage Dealt</span><span data-stat="damage-dealt">0</span></li>
                                <li><span>Damage Taken</span><span data-stat="damage-taken">0</span></li>
                            </ul>
                        </section>
                        <section class="win_stats__group">
                            <h3>Mobility</h3>
                            <ul class="win_stats__list">
                                <li><span>Slides Used</span><span data-stat="slides-used">0</span></li>
                                <li><span>Jumps</span><span data-stat="jumps">0</span></li>
                            </ul>
                        </section>
                    </div>
                </div>
                <button id="gameover-restart-button">Try Again</button>
            </div>

            <!-- RESPONSIVE -->

        </div>
    </main>
    <footer></footer>

    <!-- MODAL LEGAL NOTICE -->
    <div id="legal-modal" class="modal_overlay">
        <div class="modal_dialog" role="dialog" aria-modal="true" aria-labelledby="legal-modal-title">
            <header class="modal_header">
                <h2 id="legal-modal-title">Legal Notice</h2>
                <button id="legal-close-button" class="modal_close" aria-label="Close Legal Notice">&times;</button>
            </header>

            <div class="modal_body">

                <h3>Angaben gemäß § 5 TMG</h3>
                <p>
                    <strong>Tobias Dreifke</strong><br>
                    Musterstraße 12<br>
                    12345 Berlin<br>
                    Deutschland
                </p>

                <p>
                    <strong>Kontakt</strong><br>
                    E-Mail: <a href="mailto:mail@tobiasdreifke.com">contact@tobiasdreifke.de</a><br>
                    Telefon: +49 (0)123 456789
                </p>

                <p>
                    <strong>Verantwortlich für den Inhalt nach § 55 Abs. 2 RStV</strong><br>
                    Tobias Dreifke<br>
                </p>

                <h3>Haftungsausschluss</h3>
                <p>
                    Trotz sorgfältiger inhaltlicher Kontrolle übernehme ich keine Haftung für die Inhalte externer
                    Links.
                    Für den Inhalt der verlinkten Seiten sind ausschließlich deren Betreiber verantwortlich.
                </p>

                <h3>Urheberrecht</h3>
                <p>
                    Alle Inhalte dieser Website, insbesondere Grafiken, Texte, Soundeffekte und Musik, unterliegen dem
                    Urheberrecht.
                    Die Verwendung, Vervielfältigung oder Verbreitung ohne ausdrückliche Genehmigung ist nicht
                    gestattet.
                </p>

                <hr style="margin: 1.5em 0; border: none; border-top: 1px solid #555;">

                <h2>Credits / Assets &amp; Lizenzen</h2>

                <h3>Sprites &amp; Grafiken</h3>
                <ul>
                    <li>Icons: <a href="https://shikashipx.itch.io/shikashis-fantasy-icons-pack" target="_blank"
                            rel="noopener noreferrer">Shikashi’s Fantasy Icons Pack</a> – by Shikashi</li>
                    <li>Clouds &amp; Backgrounds: <a href="https://talhagulbahar.itch.io/clouds-and-backgrounds"
                            target="_blank" rel="noopener noreferrer">Clouds and Backgrounds Pack</a> – by Talha
                        Gulbahar</li>
                    <li>Holy Spell Effects: <a href="https://pimen.itch.io/holy-spell-effect" target="_blank"
                            rel="noopener noreferrer">Holy Spell Effect Pack</a> – by Pimen</li>
                    <li>Dark Spell Effects: <a href="https://pimen.itch.io/dark-spell-effect" target="_blank"
                            rel="noopener noreferrer">Dark Spell Effect Pack</a> – by Pimen</li>
                    <li>Background Environment: <a href="https://aethrall.itch.io/demon-woods-parallax-background"
                            target="_blank" rel="noopener noreferrer">Demon Woods Parallax Background</a> – by Aethrall
                    </li>
                    <li>Main Hero Sprite: <a href="https://rvros.itch.io/animated-pixel-hero" target="_blank"
                            rel="noopener noreferrer">Animated Pixel Hero</a> – by RVROS</li>
                    <li>Enemies / Monsters: <a href="https://luizmelo.itch.io/monsters-creatures-fantasy"
                            target="_blank" rel="noopener noreferrer">Monsters Creatures Fantasy Pack</a> – by Luiz Melo
                    </li>
                </ul>

                <h3>Soundeffekte</h3>
                <ul>
                    <li>Verschiedene Soundeffekte von <a href="https://pixabay.com/sound-effects/" target="_blank"
                            rel="noopener noreferrer">Pixabay Sound Effects</a> (freie Nutzung, Urheber teilweise
                        unbekannt)</li>
                    <li>Einige Sounds wurden mit <a href="https://mp3cut.net/de/" target="_blank"
                            rel="noopener noreferrer">mp3cut.net</a> bearbeitet oder gekürzt</li>
                </ul>

                <h3>Musik / Soundtrack</h3>
                <ul>
                    <li>Soundtrack erstellt mit <strong>Suno AI</strong> und anschließend von mir nachbearbeitet (gemäß
                        Nutzungsbedingungen für nichtkommerzielle Projekte)</li>
                </ul>

            </div>
        </div>
    </div>
</body>

</html>